import Head from 'next/head'
import DefaultLayout from '../layouts/DefaultLayout';
import { Col, Container, Row } from 'react-bootstrap';
import Link from 'next/link';
import Image from 'next/image';
import _ from 'lodash';
import { Swiper, SwiperSlide } from 'swiper/react';
import React, { useCallback, useRef, useState } from 'react';

import Electrician from '../images/icons/jobs/electrician.svg';
import PhoneIcon from '../images/icons/phone.svg';
import EmailIcon from '../images/icons/email.svg';
import LocationIcon from '../images/icons/location.svg';
import PartnerImage from '../images/partners/placeholder.png';
import SlideImage1 from '../images/slider/slide-1.jpeg';
import SlideImage2 from '../images/slider/slide-2.jpeg';
import SlideImage3 from '../images/slider/slide-3.jpeg';
import SlideImage4 from '../images/slider/slide-4.jpeg';

import MapPlaceholder from '../images/map/placeholder.jpg';

// modals
import ElectricianModal from '../components/modals/positions/ElectricianModal';

export default function Home() {
  // swiper arrows
  const sliderRef = useRef();

  const handlePrev = useCallback(() => {
    if (!sliderRef.current) return;
    sliderRef.current.swiper.slidePrev();
  }, []);

  const handleNext = useCallback(() => {
    if (!sliderRef.current) return;
    sliderRef.current.swiper.slideNext();
    console.log(sliderRef);
  }, []);

  // opened position
  const positionsSection = useRef();
  const [showPositions, setShowPositions] = useState(2);

  const handleShowAllPositions = (quantity) => {
    if (showPositions > 2) {
      setShowPositions(2);
      positionsSection.current.scrollIntoView();

    } else {
      setShowPositions(quantity)
    }
  };

  // about us
  const [showAllText, setShowAllText] = useState(false);

  const handleShowAllText = () => {
    return showAllText ? setShowAllText(false) : setShowAllText(true);
  }

  return (
    <>
      <Head>
        <title>AK Investment</title>
        <meta name="description" content="Generated by create next app"/>
        <link rel="icon" href="/favicon.ico"/>
      </Head>
      <DefaultLayout>
        <section className="hero-banner">
          <Container>
            <Row>
              <Col xs={12}>
                <h1>
                  Ми шукаємо спеціалістів!
                </h1>
                <p>
                  Постійна робота в Польщі (Гданськ). Гарантуємо вчасні виплати, надаємо житло
                  та допоможемо підготувати всі необхідні документи.
                </p>
                <Link href="/apply">
                  <button className="btn btn-primary">
                    Відгукнутись на вакансію
                  </button>
                </Link>
              </Col>
            </Row>
          </Container>
        </section>
        <section className="opened-positions" ref={positionsSection}>
          <Container>
            <Row className="justify-content-center">
              <Col lg={8}>
                <Row className="title-row justify-content-between align-items-center">
                  <Col xs="auto">
                    <h4>
                      Відкриті вакансії
                    </h4>
                  </Col>
                </Row>
              </Col>
              <Col lg={8}>
                <Row className="gy-4">
                  {
                    _.times(8, () => (
                      <Col xs={12}>
                        <div className="position-block">
                          <div className="block-title">
                            <div className="block-icon">
                              <Image src={Electrician} width={48} height={48} alt="AK Investment – Electrician Icon"/>
                            </div>
                            <div className="block-name">
                              Електрик
                            </div>
                          </div>
                          <div className="block-benefits">
                            <Row>
                              <Col xs="auto">
                                <div className="benefit-block">
                                  <div className="block-icon">
                                    <Image src={LocationIcon} width={14} height={14}
                                           alt="AK Investment – Location Icon"/>
                                  </div>
                                  <div className="block-title">
                                    Польща, Гданськ
                                  </div>
                                </div>
                              </Col>
                              <Col xs="auto">
                                <div className="benefit-block">
                                  <div className="block-icon">
                                    <Image src={LocationIcon} width={14} height={14}
                                           alt="AK Investment – Location Icon"/>
                                  </div>
                                  <div className="block-title">
                                    20-25 злотих /год.
                                  </div>
                                </div>
                              </Col>
                            </Row>
                          </div>
                          <div className="block-description">
                            <p>
                              Робота електриком на виробництві кораблів-катамаранів.<br />
                              Стака залежить від рівню знань, досвід роботи та вміння читати креслення обов&apos;язкові.
                            </p>
                            <ElectricianModal />
                          </div>
                          <div className="block-actions">
                            <Link href="/apply">
                              <button className="btn btn-primary">
                                Подати заявку
                              </button>
                            </Link>
                          </div>
                        </div>
                      </Col>
                    )).slice(0, showPositions)
                  }
                </Row>
              </Col>
              <Col xs={12}>
                <Row className="actions-row justify-content-center">
                  <Col xs="auto">
                    <button
                      className={`btn btn-primary ${showPositions > 2 ? `btn-arrow-up` : `btn-arrow-down`}`}
                      onClick={() => handleShowAllPositions(8)}
                    >
                      {showPositions > 2 ? `Приховати` : `Показати більше`}
                    </button>
                  </Col>
                </Row>
              </Col>
            </Row>
          </Container>
        </section>
        <section className="wide-slider">
          <Container>
            <Row>
              <Col xs={12}>
                <h3>
                  Вчасні виплати, житло та
                  комфортні робочі умови
                </h3>
                <p>
                  Ми дбаємо про наших співробітників, проте бажаємо відповідного ставлення
                  до виконання своїх обов&apos;язків.
                </p>
              </Col>
            </Row>
          </Container>
          <Container fluid className="p-0">
            <Row>
              <Col xs={12}>
                <Swiper
                  spaceBetween={0}
                  slidesPerView={1}
                  speed={800}
                  className="homepage-slider"
                >
                  <SwiperSlide>
                    <Image src={SlideImage4} layout="fill" objectFit="cover" objectPosition="center"
                           alt="AK Investment"/>
                  </SwiperSlide>
                  <SwiperSlide>
                    <Image src={SlideImage1} layout="fill" objectFit="cover" objectPosition="center"
                           alt="AK Investment"/>
                  </SwiperSlide>
                  <SwiperSlide>
                    <Image src={SlideImage2} layout="fill" objectFit="cover" objectPosition="center"
                           alt="AK Investment"/>
                  </SwiperSlide>
                  <SwiperSlide>
                    <Image src={SlideImage3} layout="fill" objectFit="cover" objectPosition="center"
                           alt="AK Investment"/>
                  </SwiperSlide>
                </Swiper>
              </Col>
            </Row>
          </Container>
        </section>
        <section className="double-section">
          <Container>
            <Row>
              <Col lg={8}>
                <Row>
                  <Col xs={12} className="about-us">
                    <h3>
                      Про нас
                    </h3>
                    {
                      !showAllText ? (
                        <p>
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
                          ut aliquip ex ea commodo consequat.<br/><br/>

                          Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
                          pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
                          id est laborum.
                        </p>
                      ) : (
                        <p>
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                          labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
                          ut aliquip ex ea commodo consequat.<br/><br/>

                          Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
                          pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
                          id est laborum.<br/><br/>

                          Aliquam nulla facilisi cras fermentum odio eu feugiat. Duis ut diam  quam nulla porttitor massa id neque.
                          Ac orci phasellus egestas tellus. Vitae suscipit tellus mauris a diam maecenas sed enim ut.
                          Pellentesque diam volutpat commodo sed egestas egestas  fringilla. Eu mi bibendum neque egestas
                          congue quisque. Odio eu feugiat pretium nibh ipsum consequat nisl vel.
                        </p>
                      )
                    }
                    <a
                      className={`link-with-arrow ${showAllText ? `arrow-up` : `arrow-down`}`}
                      onClick={() => handleShowAllText()}
                    >
                      {showAllText ? `Приховати` : `Показати більше`}
                    </a>
                  </Col>
                  <Col xs={12} className="partners">
                    <h4>
                      Наші партнери
                    </h4>
                    <Swiper
                      spaceBetween={20}
                      slidesPerView={3}
                      speed={800}
                      className="partners-slider"
                    >
                      {
                        _.times(4, () => (
                          <SwiperSlide>
                            <Image src={PartnerImage} layout="fill" objectFit="contain" objectPosition="left"
                                   alt="AK Investment – Partner Placeholder"/>
                          </SwiperSlide>
                        ))
                      }
                    </Swiper>
                  </Col>
                </Row>
              </Col>
              <Col lg={4} className="employment">
              </Col>
            </Row>
          </Container>
        </section>
        <section className="steps">
          <Container>
            <Row>
              <Col xs={12}>
                <h3>
                  Кроки працевлаштування
                </h3>
                <p>
                  Ми максимально спростили процес. Всього за 4 кроки ви можете отримати бажану роботу.
                </p>
                <Row className="justify-content-between gx-0 gy-5 gy-lg-0">
                  <Col lg={3}>
                    <div className="step-block first-child">
                      <div className="block-number">
                        1
                      </div>
                      <div className="block-title">
                        Подача заявки
                      </div>
                    </div>
                  </Col>
                  <Col lg={3}>
                    <div className="step-block">
                      <div className="block-number">
                        2
                      </div>
                      <div className="block-title">
                        Інтерв&apos;ю з менеджером
                      </div>
                    </div>
                  </Col>
                  <Col lg={3}>
                    <div className="step-block">
                      <div className="block-number">
                        3
                      </div>
                      <div className="block-title">
                        Підготовка документів
                      </div>
                    </div>
                  </Col>
                  <Col lg={3}>
                    <div className="step-block last-child">
                      <div className="block-number">
                        4
                      </div>
                      <div className="block-title">
                        Працевлаштування
                      </div>
                    </div>
                  </Col>
                </Row>
              </Col>
            </Row>
          </Container>
        </section>
        <section className="contacts">
          <Container>
            <Row className="gy-5">
              <Col lg={7}>
                <div className="shadow-container">
                  <h3>
                    Контакти
                  </h3>
                  <div className="contacts-blocks">
                    <div className="contacts-block">
                      <div className="block-icon">
                        <Image src={PhoneIcon} width={18} height={18} alt="AK Investment – Phone Icon"/>
                      </div>
                      <div className="block-title">
                        <Link href="tel:+48 (739) 441 878">
                          +48 (739) 441 878
                        </Link>
                      </div>
                    </div>
                    <div className="contacts-block">
                      <div className="block-icon">
                        <Image src={EmailIcon} width={18} height={18} alt="AK Investment – Email Icon"/>
                      </div>
                      <div className="block-title">
                        <Link href="mailto:akinvestpolka@gmail.com">
                          akinvestpolka@gmail.com
                        </Link>
                      </div>
                    </div>
                    <div className="contacts-block">
                      <div className="block-icon">
                        <Image src={LocationIcon} width={18} height={18} alt="AK Investment – Location Icon"/>
                      </div>
                      <div className="block-title">
                        <Link href="#">
                          Польща, Гданськ
                        </Link>
                      </div>
                    </div>
                  </div>
                  <div className="map-block">
                    <Image src={MapPlaceholder} layout="fill" objectFit="cover" objectPosition="center"
                           alt="AK Investment – Map Placeholder"/>
                  </div>
                </div>
              </Col>
              <Col lg={5}>
                <div className="shadow-container">
                  <h3>
                    Зворотній виклик
                  </h3>
                  <p>
                    Якщо у вас залишились запитання щодо вакансії чи, можливо, необхідних документів
                    для працевлаштування – заповніть форму, наш менеджер зв&apos;яжеться з вами.
                  </p>
                  <form action="#">
                    <Row className="gy-4">
                      <Col xs={12}>
                        <label htmlFor="name">
                          Повне ім&apos;я
                        </label>
                        <input type="text" className="form-control" name="name" placeholder="Alexander McKinsey"/>
                      </Col>
                      <Col xs={12}>
                        <label htmlFor="email">
                          E-mail
                        </label>
                        <input type="text" className="form-control" name="email"
                               placeholder="careers@ak-inverstment.pl"/>
                      </Col>
                      <Col xs={12}>
                        <label htmlFor="phone">
                          Контактний телефон
                        </label>
                        <input type="text" className="form-control" name="phone" placeholder="+38 (000) 00 00 000"/>
                      </Col>
                      <Col xs={12}>
                        <button className="btn btn-primary">
                          Надіслати
                        </button>
                      </Col>
                    </Row>
                  </form>
                </div>
              </Col>
            </Row>
          </Container>
        </section>
      </DefaultLayout>
    </>
  )
}
